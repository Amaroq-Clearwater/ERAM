
　ERAM for Windows XP / NT/ 2000 / 7 / 10 (32-bit and 64-bit) v2.23 暫定版
　　　　　　　　　　　　　　　　　　　　　　　　2004.7.11 えらー１５

　v2.20,21からの一部変更版です。v2.22の修正版です。

　正式版ではありません。このドキュメントを読んで、
よくわからない方は使用しないでください。
技術的に詳しくない方のサポートはいたしかねます。

・over4GB環境でPAE NOLOWMEM指定時、MAXMEM=nの指定がover4GB領域に
　効くことの考慮漏れを修正 (したつもり) v2.23以降

　over4GB環境でNOLOWMEM指定すると、MAXMEM=nの制限開始位置もover4GB位置に
　移動します。しかしv2.21以前では、安全対策のためn～4095MBの範囲のRAMしか
　使わないようなチェックを入れており、NOLOWMEM環境では実際に使えるメモリが
　少ないものになっていました。
　そこで、PAE NOLOWMEM指定時にはMAXMEM=17が指定されたかのような流れに
　入るような制御を追加してみました。4GB空間の最上位の数MBはPCIに使われるので
　実質4000MB程度のメモリを利用できる…かもしれません。
　手元にはover4GB環境が無いので、実際に動くかどうかはわかりません。

　天夢 森流彩さんに細かい情報をいただきました。ありがとうございました。
　1.7GBあたりの壁は少なくとも天夢 森流彩さんの環境ではv2.21時点で突破されました。

　この新しいドライバは、とりあえず従来のINFファイルでインストールできます。

　なお、PAE無しのNOLOWMEM指定時の挙動についてはv2.23時点では依然として
　MAXMEM=nを誤認しますが解決策は今のところ不明です。

・ACPIのメモリを除外 (したつもり) v2.21以降

　ACPI NVS, ACPI Reclaim はACPI BIOSによって物理RAMの最上位に置かれます。
　MAXMEM指定の無い場合、これらの領域は Loader Reserved となり、OSから
　使用されることはありませんが、MAXMEM=n指定の際はOS管理外となり、
　自分で管理しなければなりませんでした。
　しかし、ACPIの環境がほぼ標準になるにつれて、ちゃんと動かない旨の情報も
　増えてきています。
　ACPIの情報はリアルモードにていわゆる E820 I/F にて取得する必要がありますが
　NT系のドライバからはBIOSを呼べませんので、メモリ中のテーブルから
　推測する方式にしました。
　テーブル内容はACPI BIOS仕様書2.0c(2003/8/25)に従っているつもりです。

　しかし手元にACPIなマシンが2つしかありません。
　手元の2台では大丈夫ですが、世間一般に大丈夫どうかは不明です。

　その場合でも、RAMディスクの容量をACPI領域と重ならない程度に小さくすれば
　問題は発生しません。

　この新しいドライバは、とりあえず従来のINFファイルでインストールできます。

・2個目のドライバインストールに対応 (暫定) v2.21以降

　試しに2個入れてみたいという要望がありましたので、無理矢理2個目を
　インストールできるようにしてみました。

　新しいドライバは、1個目と2個目が共通ですが、ファイル名がeram2.sysに
　なります。ドライバ名もEram2になります。Windows2000以降では、1個目のような
　ハードウェアウィザードを用いるのではなく、INFの右クリックになります。
　INFファイルは、2NDディレクトリの下に置いていますが、事故を避けるため
　IN_と拡張子を変えています。
　　拡張子を戻す
　　右クリックでインストール
　　リブート

　【重要】
　　暫定版のため、Eram2 の設定を画面から変更することはできません。
　　Eram の設定を変更したものを参考にし、レジストリを触ることになります。

　【重要】
　　暫定版のため、アンインストーラがありません。
　　レジストリから Eram2 を検索して消すことになります。
　　ファイルは eram2.sys を消すことになります。

